---
layout: ../../layouts/MainLayout.astro
---

## Goals

BY THE END OF THIS SECTION YOU WILL HAVE:

- made a new theme toggle UI component to switch your site between light and dark mode

- defined global styles for both a light and a dark theme

- used JavaScript within a `<script>` tag to make your toggle button interactive 

## Create a theme toggle component

1. Create a new file at `src/components/ThemeToggle.astro` and paste the following code into it:

```astro
<div class="toggle">
    <label class="switch">
      <input id="toggler" type="checkbox">
      <span class="slider"></span>
    </label>
</div>
```


2. Add the theme toggle to `BaseLayout.astro` so that it will be displayed on all pages. Don't forget to import the component!

```diff
  <Navigation />
+ <ThemeToggle />
  <h1>{title}</h1>

  <slot />

  <Footer />
```

3. Visit your browser preview at `localhost:3000` to see this component now rendered to your page, and try clicking on it.


This toggle is an HTML checkbox, but it won't look like one when we're done with it! Using CSS classes, we will make it look like a sliding toggle instead.


## Add CSS styling for each theme

1. Define some style colors for both a light and dark theme in `global.css`. You can choose your own, or copy and paste:

```css
/* Default Light Mode Theme */

:root, [data-theme="default"] {
  --body-bg-color: #E2CAF1;
  --text-color: #333;
  --toggler-color: #fff;
}

/* Dark Mode Theme */

[data-theme="dark"] {
  --body-bg-color: #0D0950;
  --text-color: #fff;
  --toggler-color: #333;
}
```

2. Copy the following CSS into `global.css` to style the HTML input that will create the toggle switch itself:

```css

.toggle {
  margin-top: 0.5em;
}

.switch {
  position: relative;
  display: inline-block;
  width: 48px;
  height: 20px;
}

/* Hide default HTML checkbox */
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* The slider */

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #333;
  border-radius: 20px;
  -webkit-transition: .4s;
  transition: .4s;
}
.slider:before {
  position: absolute;
  content: "";
  height: 12px;
  width: 12px;
  left: 4px;
  bottom: 4px;
  background-color: var(--toggler-color);
  border-radius: 50%;
  -webkit-transition: .4s;
  transition: .4s;
}
input:checked + .slider {
  background-color: #fff;
}

input:checked + .slider:before {
  -webkit-transform: translateX(26px);
  -ms-transform: translateX(26px);
  transform: translateX(26px);
}

```

2. Edit your existing CSS so that both the text and background colors now depend on your theme choice:

```diff
body {
-    background-color: #E2CAF1;    
+    background-color: var(--body-bg-color);
+    transition: background-color .45s ease-in;    
}

+ * {
+    color: var(--text-color);
+ }

```

3. Visit your site in your browser preview and click the theme toggle. Notice what does or does not change!

Now, you have a styled HTML element at the top of your page, under your navigation links. It is still functionally a checkbox, so clicking on it does *something* (remember, an HTML checkbox can toggle between an empty box and a filled-in box). But, a checkbox can only change its own appearance. We will need JavaScript to "listen" for the action of checking or unchecking the box, and then change the properties of *other* HTML elements in response.

## Add client-side interactivity

To provide **client-side JavaScript** (interactivity that can be prompted by the user), we use a `<script>` tag in an Astro component template. 

The script will "listen" for a change to the checkbox, and set or remove a `data-theme` dark mode attribute to the page `<body>` in response.

### Using script tags

1. Add the following `<script>`, and attribute to the `<body>` tag in `src/layouts/BaseLayout.astro`:

```diff
+ <script>
+   document.getElementById('toggler').addEventListener('change', (event) => {
+     event.target.checked 
+       ? document.body.setAttribute('data-theme', 'dark')
+       : document.body.removeAttribute('data-theme')
+   });
+ </script>
	</body>
```
2. Check your browser preview at `localhost:3000` and click the theme toggle. Verify that you can change between light and dark mode on this, and all your website pages and blog posts.

Your site now has an interactive UI element, thanks to a `<script>` tag in your HTML template, at the bottom of your page `<body>`!

Although we have already used some JavaScript to build parts of your site (e.g. mapping through a list of skills on the About page, fetching information from your Markdown files, creating page routes dynamically), those commands are all executed **at build time to create static HTML for your site**, and then the code is "thrown away." 

This is the first JavaScript for your site that is sent to the browser, and is available to run, and re-run, based on user interactions like refreshing a page or toggling an input.

### Using a `.js` file from your project

Just like we can refactor parts of our template into smaller Astro components, we can also move the contents of `<script>` tags into separate files. Then, we can import that file into our `<script>` tag.


3. Create `src/scripts/toggle-theme.js` (you will have to create a new folder) and move your JavaScript into its contents

```js
document.getElementById('toggler').addEventListener('change', (event) => {
    event.target.checked 
    ? document.body.setAttribute('data-theme', 'dark')
    : document.body.removeAttribute('data-theme')
});
```

4. Update the contents of the `<script>` tag to import this file instead of holding the JavaScript directly.

```astro
<script>import '../scripts/theme-toggle.js'</script>

```

## Before You Go

### Test your knowledge

### Checklist for moving on