---
layout: ../../layouts/MainLayout.astro
---

## Goals

BY THE END OF THIS SECTION YOU WILL HAVE:

- made a new theme toggle UI component to switch your site between light and dark mode

- defined global styles for both a light and a dark theme

- used JavaScript within a `<script>` tag to make your toggle button interactive 

## Create a theme toggle component

1. Create a new file at `src/components/ThemeToggle.astro` and paste the following code into it:

```astro
<div class="toggle">
    <label class="switch">
      <input id="toggler" type="checkbox">
      <span class="slider round"></span>
    </label>
</div>
```


2. Add the theme toggle to `BaseLayout.astro` so that it will be displayed on all pages. Don't forget to import the component!

```diff
  <Navigation />
+ <ThemeToggle />
  <h1>{title}</h1>

  <slot />

  <Footer />
```

3. Visit your browser preview at `localhost:3000` to see this component now rendered to your page, and try clicking on it.


This toggle is an HTML checkbox, but it won't look like one when we're done with it! Using CSS classes, we will make it look like a sliding toggle instead.


## Add CSS styling for each theme

1. Define some style colors for both a light and dark theme in `global.css`. You can choose your own, or copy and paste:

```css
:root, [data-theme="default"] {
  --body-bg-color: #e2caf1;
  --text-color: #333;
  --switch-on-color: #444352;
  --switch-off-color: #ccc;
  --toggler-color: #fff;
}
/* Dark Mode Theme */
[data-theme="dark"] {
  --body-bg-color: #0d0950;
  --text-color: #efefef;
  --toggler-color: #444352;
  --switch-on-color: #fff;
  --switch-off-color: #ccc;
}
```

2. Copy the following CSS into `global.css` to style the HTML input that will create the toggle switch itself:

```css

.toggle {
  margin-top: 0.5em;
}

.switch {
  position: relative;
  display: inline-block;
  width: 48px;
  height: 20px;
}

/* Hide the default HTML checkbox */
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--switch-off-color);
  -webkit-transition: .4s;
  transition: .4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 12px;
  width: 12px;
  left: 4px;
  bottom: 4px;
  background-color: var(--toggler-color);
  -webkit-transition: .4s;
  transition: .4s;
}

input:checked + .slider {
  background-color: var(--switch-on-color);
}

input:focus + .slider {
  box-shadow: 0 0 1px var(--switch-on-color);
}

input:checked + .slider:before {
  -webkit-transform: translateX(26px);
  -ms-transform: translateX(26px);
  transform: translateX(26px);
}


.slider.round {
  border-radius: 20px;
}

.slider.round:before {
  border-radius: 50%;
}

```

2. Edit your existing CSS so that both the text and background colors now depend on your theme choice:

```diff
body {
-    background-color: #E2CAF1;    
+    background-color: var(--body-bg-color);
+    transition: background-color .45s ease-in;    
}

+ * {
+    color: var(--text-color);
+ }

```

3. Visit your site in your browser preview and click the theme toggle. Notice what does or does not change!

Now, you have a styled HTML element at the top of your page, under your navigation links. It is still functionally a checkbox, so clicking on it does *something* (remember, an HTML checkbox can toggle between an empty box and a filled-in box). But, a checkbox can only change its own appearance. We will need JavaScript to "listen" for the action of checking or unchecking the box, and then change the properties of *other* HTML elements in response.

## Add a `<script>` for interactivity

To provide **client-side JavaScript** (interactivity that can be prompted by the user), we can use a `<script>` tag in an Astro component template. The script we will add will "listen" for a change to the checkbox (selected vs unselected), and apply a different theme.

To change the appearance of the `<body>` of our page, we will need to give it an `id` to identify it, and a data attribute for which theme it should use.

Add the following `<script>`, and attributes to the `<body>` tag in `src/layouts/BaseLayout.astro`:

```diff
-   <body>
+	<body id="page" data-theme="dark">
      <Navigation />
      <Toggle />
      <h1>{title}</h1>
      <slot />
      <Footer />

+ <script>
+      const page = document.getElementById('page');
+
+      document.getElementById('toggler').addEventListener('change', (event) => {
+        event.target.checked ? page.removeAttribute('data-theme') : page.setAttribute('data-theme', 'dark');
+      });
+    </script>
	</body>
```

## Before You Go

### Test your knowledge

### Checklist for moving on